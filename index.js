!function(e){var i={};function t(s){if(i[s])return i[s].exports;var r=i[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=e,t.c=i,t.d=function(e,i,s){t.o(e,i)||Object.defineProperty(e,i,{enumerable:!0,get:s})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,i){if(1&i&&(e=t(e)),8&i)return e;if(4&i&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(t.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&i&&"string"!=typeof e)for(var r in e)t.d(s,r,function(i){return e[i]}.bind(null,r));return s},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,i){return Object.prototype.hasOwnProperty.call(e,i)},t.p="",t(t.s=0)}([function(e,i,t){"use strict";t.r(i);var s=new Image;s.src="https://cdn.wikimg.net/en/strategywiki/images/f/f8/Arkanoid_Vaus.gif";var r=class{constructor(e){this.length=100,this.height=30,this.x=e-this.length/2,this.spaceFromBorder=10,this.xSpeed=20}draw(){W.drawImage(s,this.x-this.length/5,K-this.height,1.5*this.length,this.height)}movePaddle(e){this.x<J-this.length-this.spaceFromBorder&&e*this.xSpeed>=0?this.x+=e*this.xSpeed:this.x>this.spaceFromBorder&&e*this.xSpeed<=0&&(this.x+=e*this.xSpeed)}},h=new Image;h.src="https://upload.wikimedia.org/wikipedia/commons/c/c4/Table_tennis_ball.png";var a=class{constructor(e,i){this.size=10,this.xSpeed=0,this.ySpeed=0,this.ballSpeed=6,this.x=e,this.y=K-i-this.size,this.yBottom=this.y,this.isGameStart=!1,this.gameOver=!1,this.score=0,this.lives=3,this.circlePoints=function(e,i,t,s){const r=[];for(let h=0;h<s/2;h++){let a={x:Math.round(i+e*Math.cos((h+1)*(Math.PI/(s/2)))),y:Math.round(t+e*Math.sin((h+1)*(Math.PI/(s/2))))};r.push(a)}for(let h=0;h<s/2;h++){let a={x:Math.round(i+e*Math.cos((h+1)*(Math.PI/(s/2)))),y:Math.round(t-e*Math.sin((h+1)*(Math.PI/(s/2))))};r.push(a)}return r}(this.size,this.x,this.y,12)}move(){this.x+=this.xSpeed,this.y+=this.ySpeed;for(let e=0;e<this.circlePoints.length;e++)this.circlePoints[e].x+=this.xSpeed,this.circlePoints[e].y+=this.ySpeed}draw(e){this.isGameStart||(this.x=e.x+e.length/2),W.beginPath(),W.arc(this.x,this.y,this.size,0,2*Math.PI),W.fill(),W.drawImage(h,this.x-this.size,this.y-this.size,2*this.size,2*this.size)}calcYSpeed(e){this.ballSpeed=e,this.ySpeed>0?this.ySpeed=Math.abs(Math.sqrt(Math.pow(-this.ballSpeed,2)-Math.pow(this.xSpeed,2))):this.ySpeed=-Math.abs(Math.sqrt(Math.pow(-this.ballSpeed,2)-Math.pow(this.xSpeed,2)))}startBall(){if(!this.isGameStart){let e=Math.floor(Math.random()*(this.ballSpeed-1)*2-(this.ballSpeed-1));0===e&&(e+=1),this.xSpeed=e,this.ySpeed=-Math.abs(Math.sqrt(Math.pow(-this.ballSpeed,2)-Math.pow(this.xSpeed,2))),console.log("speed x - "+this.xSpeed+" speed y - "+this.ySpeed),this.isGameStart=!0}}onPaddle(e){return this.x<=e.x+e.length&&this.x>=e.x&&this.ySpeed>0}onHit(e,i,t){(this.y<this.size-this.size||1===i)&&(this.ySpeed=-this.ySpeed),0!==i&&(this.score++,document.querySelector(".score").innerText=this.score),document.querySelector(".lives").innerText=this.lives,t.barrierIsOn&&this.y>this.yBottom-t.yBarrier?this.ySpeed=-this.ySpeed:this.y>=this.yBottom&&(this.onPaddle(e)?(this.ySpeed=-this.ySpeed,this.y>K-e.height&&(this.xSpeed=-this.xSpeed)):this.y>K-this.size&&(this.lives--,this.lives<=0?(alert("GAME OVER!"),document.location.reload()):this.ySpeed=-this.ySpeed)),(this.x>J-this.size||this.x<this.size||2===i)&&(this.xSpeed=-this.xSpeed)}};const n=5,c=5;var o=new Image,l=new Image,d=new Image,p=new Image,g=new Image,u=new Image,w=new Image,k=new Image;o.src="https://cdn.wikimg.net/en/strategywiki/images/5/5c/Arkanoid_Brick_White.png",l.src="https://cdn.wikimg.net/en/strategywiki/images/f/f4/Arkanoid_Brick_Cyan.png",d.src="https://cdn.wikimg.net/en/strategywiki/images/4/4c/Arkanoid_Brick_Green.png",p.src="https://cdn.wikimg.net/en/strategywiki/images/e/eb/Arkanoid_Brick_Orange.png",g.src="https://cdn.wikimg.net/en/strategywiki/images/e/e2/Arkanoid_Brick_Red.png",u.src="https://cdn.wikimg.net/en/strategywiki/images/1/17/Arkanoid_Brick_Blue.png",w.src="https://cdn.wikimg.net/en/strategywiki/images/7/77/Arkanoid_Brick_Violet.png",k.src="https://cdn.wikimg.net/en/strategywiki/images/9/91/Arkanoid_Brick_Yellow.png";let m=[o,l,d,p,g,u,w,k];class S{constructor(e,i,t,s){this.x=e,this.y=i,this.width=t,this.height=s,this.isOn=!0}move(e){this.y+=e}draw(e){!0===this.isOn&&W.fillRect(this.x,this.y,this.width,this.height),!0===this.isOn&&W.drawImage(m[e],this.x,this.y,this.width,this.height)}}var y=class{constructor(e,i,t,s){this.bricks=function(e,i,t,s){const r=[];for(let h=0;h<e;h++){r[h]=[];for(let e=0;e<i;e++){const i=n+e*n+e*t,a=c+h*c+h*s;r[h][e]=new S(i,a,t,s)}}return r}(e,i,t,s),this.numbOfRows=e,this.bricksInRow=i}drawBricks(){for(let e=0;e<this.numbOfRows;e++)for(let i=0;i<this.bricksInRow;i++)this.bricks[e][i].draw(e)}hitBrick(e,i){for(let t=this.numbOfRows-1;0<=t;t--)for(let s=this.bricksInRow-1;0<=s;s--)for(let r=0;r<e.circlePoints.length;r++)if(e.circlePoints[r].x<=this.bricks[t][s].x+this.bricks[t][s].width&&e.circlePoints[r].x>=this.bricks[t][s].x&&e.circlePoints[r].y<=this.bricks[t][s].y+this.bricks[t][s].height&&e.circlePoints[r].y>=this.bricks[t][s].y&&this.bricks[t][s].isOn){if(this.bricks[t][s].isOn=!1,i.createPowerUp(this.bricks[t][s]),e.circlePoints[r].x<this.bricks[t][s].x+this.bricks[t][s].width&&e.circlePoints[r].x>this.bricks[t][s].x)return 1;if(e.circlePoints[r].y<=this.bricks[t][s].y+this.bricks[t][s].height&&e.circlePoints[r].y>=this.bricks[t][s].y)return 2}return 0}allBricksOff(){let e=this.numbOfRows*this.bricksInRow;for(let i=0;i<this.numbOfRows;i++)for(let t=0;t<this.bricksInRow;t++)!1===this.bricks[i][t].isOn&&e--;return 0==e}};var b=class{constructor(){this.previousSize=0}shrink(e){0===this.previousSize&&(this.previousSize=e.size),e.size>=this.previousSize/2&&(e.size*=.9)}};var f=class{constructor(){this.previousSize=0}large(e){0===this.previousSize&&(this.previousSize=e.length),e.length<=2*this.previousSize&&(e.length*=1.2)}};var x=class{constructor(){this.previousSize=0}shrink(e){0===this.previousSize&&(this.previousSize=e.length),e.length>=this.previousSize/2&&(e.length*=.9)}};var v=class{constructor(){this.previousSpeed=0}accelerate(e){0===this.previousSpeed&&(this.previousSpeed=e.ballSpeed),e.ballSpeed<=1.5*this.previousSpeed&&e.calcYSpeed(1.2*e.ballSpeed)}};var _=class{constructor(){this.previousSpeed=0}accelerate(e){0===this.previousSpeed&&(this.previousSpeed=e.xSpeed),e.xSpeed<=2*this.previousSpeed&&(e.xSpeed*=1.2)}};var z=class{constructor(){this.previousSpeed=0}slow(e){0===this.previousSpeed&&(this.previousSpeed=e.xSpeed),e.xSpeed>=this.previousSpeed/2.5&&(e.xSpeed*=.7)}};var I=class{constructor(){}barrierOn(e){e.powerUpBarrier=!0}};const P=new class{constructor(){this.previousSize=0}large(e){0===this.previousSize&&(this.previousSize=e.size),e.size<=2*this.previousSize&&(e.size*=1.2)}},B=new b,M=new f,O=new x,A=new v,R=new _,U=new z,F=new I;var j=new Image,q=new Image,C=new Image,E=new Image,G=new Image,L=new Image,T=new Image,Y=new Image,H=new Image;j.src="https://cdn.wikimg.net/en/strategywiki/images/7/70/Arkanoid_2_capsule_Laser.gif",q.src="https://cdn.wikimg.net/en/strategywiki/images/b/be/Arkanoid_2_capsule_Enlarge.gif",C.src="https://cdn.wikimg.net/en/strategywiki/images/7/79/Arkanoid_2_capsule_Catch.gif",E.src="https://cdn.wikimg.net/en/strategywiki/images/f/fc/Arkanoid_2_capsule_Slow.gif",G.src="https://cdn.wikimg.net/en/strategywiki/images/a/a5/Arkanoid_2_capsule_Player.gif",T.src="https://cdn.wikimg.net/en/strategywiki/images/5/5f/Arkanoid_2_capsule_Disrupt.gif",L.src="https://cdn.wikimg.net/en/strategywiki/images/f/f1/Arkanoid_2_capsule_Two.gif",Y.src="https://cdn.wikimg.net/en/strategywiki/images/archive/3/3d/20120407132309%21Arkanoid_2_capsule_Break.gif",H.src="https://cdn.wikimg.net/en/strategywiki/images/f/f8/Arkanoid_2_capsule_Reduce.gif";let N=[j,q,C,E,G,T,L,Y,H];var V=class{constructor(e,i){this.x,this.y,this.width=50,this.height=20,this.yBottom=K-this.height,this.ySpeed=0,this.yBarrier=10,this.barrierIsOn=!1,this.counter=0,this.coutnerLimit=300,this.isFalling=!1,this.isCreate=!1,this.color="rgba(0,0,0,0)",this.powerUpNumber=0,this.backUpBallSize=e.size,this.backUpPaddleSize=i.length,this.backUpBallSpeed=e.ballSpeed,this.backUpPaddleSpeed=i.xSpeed}move(){this.y+=this.ySpeed}draw(e){this.isFalling&&(W.fillStyle=this.color,W.fillRect(this.x,this.y,this.width,this.height),W.drawImage(N[this.powerUpNumber-1],this.x,this.y,this.width,this.height),this.y>=K&&(this.isFalling=!1)),this.barrierIsOn&&(W.fillStyle="#ff33cc",W.fillRect(0,K-this.yBarrier-e,J,this.yBarrier),this.counter>=this.coutnerLimit&&(this.barrierIsOn=!1,this.counter=0)),this.counter++}createPowerUp(e){this.isFalling||(this.x=e.x,this.y=e.y,this.ySpeed=3,this.powerUpNumber=Math.floor(9*Math.random()+1),this.isFalling=!0,this.isCreate=!0)}onHit(e){return this.y>this.yBottom&&(this.isFalling=!1,this.x<=e.x+e.length&&this.x>=e.x)}runPowerUp(e,i){if(this.onHit(e)&&this.isCreate)switch(this.isCreate=!1,this.powerUpNumber){case 1:P.large(i);break;case 2:B.shrink(i);break;case 3:M.large(e);break;case 4:O.shrink(e);break;case 5:A.accelerate(i);break;case 6:U.slow(e);break;case 7:R.accelerate(e);break;case 8:this.barrierIsOn=!0,F.barrierOn(i),this.counter=0;break;case 9:i.size=this.backUpBallSize,e.length=this.backUpPaddleSize,i.calcYSpeed(this.backUpBallSpeed),e.xSpeed=this.backUpPaddleSpeed}}};t.d(i,"canvas",(function(){return D})),t.d(i,"ctx",(function(){return W})),t.d(i,"cw",(function(){return J})),t.d(i,"ch",(function(){return K}));const D=document.querySelector("canvas"),W=D.getContext("2d"),J=D.width,K=D.height,Q=new r(J/2),X=new a(Q.x+Q.length/2,Q.height),Z=new y(8,7,80,30),$=new V(X,Q);var ee=new Image;ee.src="https://www.ctvnews.ca/polopoly_fs/1.4011871.1531487420!/httpImage/image.jpg_gen/derivatives/landscape_620/image.jpg";const ie=()=>{W.fillStyle="black",W.fillRect(0,0,J,K),X.move(),$.move(),W.drawImage(ee,0,0,J,K);let e=Z.hitBrick(X,$);X.onHit(Q,e,$),$.runPowerUp(Q,X),$.draw(Q.height),Q.draw(),X.draw(Q),Z.drawBricks(),Z.allBricksOff()&&(alert("You won, congratulations!"),document.location.reload()),requestAnimationFrame(ie)},te=()=>{X.startBall(),X.move()};document.addEventListener("click",e=>{console.log(e),te()}),document.addEventListener("keydown",e=>{switch(e.keyCode){case 32:te();break;case 37:Q.movePaddle(-1);break;case 39:Q.movePaddle(1)}}),document.addEventListener("keyup",Q.movePaddle(0)),requestAnimationFrame(ie)}]);